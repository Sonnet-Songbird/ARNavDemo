<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/three.js/build/ar-threex-location-only.js"></script>
</head>
<body>
    <canvas id="canvas1"></canvas>

    <script>

        function addRandomBoxes(scene, arjs) {
            for (let i = 0; i < 20; i++) {
                const color = Math.random() * 0xffffff;
                const size = Math.random() * 10 + 5;
                const x = (Math.random() - 0.5) * 100;
                const z = (Math.random() - 0.5) * 100;


                const geom = new THREE.BoxGeometry(size, size, size);
                const mtl = new THREE.MeshBasicMaterial({color});
                const box = new THREE.Mesh(geom, mtl);

                arjs.add(box, x, z);
            }
        }

        function main() {
            const canvas = document.getElementById('canvas1');
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(60, 1.33, 0.1, 10000);
            const renderer = new THREE.WebGLRenderer({canvas});

            const arjs = new THREEx.LocationBased(scene, camera);

            addRandomBoxes(scene, arjs); // 함수 호출로 랜덤한 상자 추가

            arjs.startGps();

            function render() {
                // if (canvas.width !== canvas.clientWidth || canvas.height !== canvas.clientHeight) {
                //     renderer.setSize(canvas.clientWidth, canvas.clientHeight, false);
                //     camera.aspect = canvas.clientWidth / canvas.clientHeight;
                //     camera.updateProjectionMatrix();
                // }
                renderer.render(scene, camera);
                requestAnimationFrame(render);
            }

            requestAnimationFrame(render);
        }

        main();


    </script>
</body>
</html>
